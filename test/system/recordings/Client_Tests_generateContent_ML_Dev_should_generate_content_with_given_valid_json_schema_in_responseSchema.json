{
  "recordID": "Client_Tests_generateContent_ML_Dev_should_generate_content_with_given_valid_json_schema_in_responseSchema",
  "interactions": [
    {
      "request": {
        "method": "POST",
        "url": "/v1beta/models/gemini-1.5-flash:generateContent",
        "request": "POST /v1beta/models/gemini-1.5-flash:generateContent HTTP/1.1",
        "headers": {
          "Accept": "*/*",
          "Accept-Encoding": "gzip, deflate",
          "Accept-Language": "*",
          "Connection": "keep-alive",
          "Content-Length": "1632",
          "Content-Type": "application/json",
          "Sec-Fetch-Mode": "cors",
          "Test-Name": "Client Tests generateContent ML Dev should generate content with given valid json schema in responseSchema"
        },
        "bodySegments": [
          {
            "contents": [
              {
                "parts": [
                  {
                    "text": "populate the following object"
                  }
                ],
                "role": "user"
              }
            ],
            "generationConfig": {
              "responseJsonSchema": {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "additionalProperties": false,
                "properties": {
                  "arrayFiled": {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "inner": {
                    "additionalProperties": false,
                    "properties": {
                      "innerNumber": {
                        "type": "number"
                      },
                      "innerString": {
                        "type": "string"
                      }
                    },
                    "required": ["innerString", "innerNumber"],
                    "type": "object"
                  },
                  "integerInt64": {
                    "type": "integer"
                  },
                  "nullableArrayField": {
                    "anyOf": [
                      {
                        "items": {
                          "type": "string"
                        },
                        "type": "array"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "nullableField": {
                    "type": ["string", "null"]
                  },
                  "nullableObjectField": {
                    "anyOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "innerNumber": {
                            "type": "number"
                          },
                          "innerString": {
                            "type": "string"
                          }
                        },
                        "required": ["innerString", "innerNumber"],
                        "type": "object"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "numberWithMinMax": {
                    "maximum": 10,
                    "minimum": 1,
                    "type": "number"
                  },
                  "simpleBoolean": {
                    "type": "boolean"
                  },
                  "simpleInteger": {
                    "type": "integer"
                  },
                  "simpleNumber": {
                    "type": "number"
                  },
                  "simpleString": {
                    "description": "This is a simple string",
                    "type": "string"
                  },
                  "stringDatatime": {
                    "format": "date-time",
                    "type": "string"
                  },
                  "stringWithEnum": {
                    "enum": ["enumvalue1", "enumvalue2", "enumvalue3"],
                    "type": "string"
                  },
                  "stringWithLength": {
                    "maxLength": 10,
                    "minLength": 1,
                    "type": "string"
                  },
                  "unionField": {
                    "type": ["string", "number"]
                  }
                },
                "required": [
                  "simpleString",
                  "stringDatatime",
                  "stringWithEnum",
                  "stringWithLength",
                  "simpleNumber",
                  "simpleInteger",
                  "integerInt64",
                  "numberWithMinMax",
                  "simpleBoolean",
                  "arrayFiled",
                  "unionField",
                  "nullableField",
                  "nullableArrayField",
                  "nullableObjectField",
                  "inner"
                ],
                "type": "object"
              },
              "responseMimeType": "application/json"
            }
          }
        ],
        "previousRequest": "b4d6e60a9b97e7b98c63df9308728c5c88c0b40c398046772c63447b94608b4d",
        "serverAddress": "generativelanguage.googleapis.com",
        "port": 443,
        "protocol": "https"
      },
      "shaSum": "696f50df2dc5aa62c5c6d42f6f7840e161d5472718053d8cfd8bd5ef2ac20384",
      "response": {
        "statusCode": 200,
        "headers": {
          "Content-Encoding": "gzip",
          "Content-Length": "500",
          "Content-Type": "application/json; charset=UTF-8",
          "Date": "Sat, 16 Aug 2025 00:43:06 GMT",
          "Server": "scaffolding on HTTPServer2",
          "Server-Timing": "gfet4t7; dur=1453",
          "Vary": "Origin, X-Origin, Referer",
          "X-Content-Type-Options": "nosniff",
          "X-Frame-Options": "SAMEORIGIN",
          "X-Xss-Protection": "0"
        },
        "bodySegments": [
          {
            "candidates": [
              {
                "avgLogprobs": -0.007235370385341155,
                "content": {
                  "parts": [
                    {
                      "text": "{\"arrayFiled\": [\"string\"], \"inner\": {\"innerNumber\": 1.23, \"innerString\": \"string\"}, \"integerInt64\": 123, \"nullableArrayField\": null, \"nullableField\": null, \"nullableObjectField\": null, \"numberWithMinMax\": 1.23, \"simpleBoolean\": true, \"simpleInteger\": 123, \"simpleNumber\": 1.23, \"simpleString\": \"string\", \"stringDatatime\": \"2024-01-01T00:00:00Z\", \"stringWithEnum\": \"enumvalue1\", \"stringWithLength\": \"string\", \"unionField\": 1.23}"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP"
              }
            ],
            "modelVersion": "gemini-1.5-flash",
            "responseId": "GdSfaLeBGOKMm9IPzITjqQc",
            "usageMetadata": {
              "candidatesTokenCount": 156,
              "candidatesTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 156
                }
              ],
              "promptTokenCount": 4,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 4
                }
              ],
              "totalTokenCount": 160
            }
          }
        ]
      }
    }
  ]
}
