{
  "recordID": "Client_Tests_generateContentStream_Vertex_AI_should_stream_generate_content_with_system_instruction",
  "interactions": [
    {
      "request": {
        "method": "POST",
        "url": "/v1beta1/projects/REDACTED/locations/REDACTED/publishers/google/models/gemini-1.5-flash:streamGenerateContent?alt=sse",
        "request": "POST /v1beta1/projects/REDACTED/locations/REDACTED/publishers/google/models/gemini-1.5-flash:streamGenerateContent?alt=sse HTTP/1.1",
        "headers": {
          "Accept": "*/*",
          "Accept-Encoding": "gzip, deflate",
          "Accept-Language": "*",
          "Connection": "keep-alive",
          "Content-Length": "233",
          "Content-Type": "application/json",
          "Sec-Fetch-Mode": "cors",
          "Test-Name": "Client Tests generateContentStream Vertex AI should stream generate content with system instruction"
        },
        "bodySegments": [
          {
            "contents": [
              {
                "parts": [
                  {
                    "text": "high"
                  }
                ],
                "role": "user"
              }
            ],
            "generationConfig": {
              "candidateCount": 1,
              "maxOutputTokens": 200
            },
            "systemInstruction": {
              "parts": [
                {
                  "text": "I say high you say low, then tell me why is the sky blue."
                }
              ],
              "role": "user"
            }
          }
        ],
        "previousRequest": "b4d6e60a9b97e7b98c63df9308728c5c88c0b40c398046772c63447b94608b4d",
        "serverAddress": "us-central1-aiplatform.googleapis.com",
        "port": 443,
        "protocol": "https"
      },
      "shaSum": "234c09f644415a3cdbac6a87c99e68259102866b98378f52996d8646d4b4cbb6",
      "response": {
        "statusCode": 200,
        "headers": {
          "Content-Disposition": "attachment",
          "Content-Type": "text/event-stream",
          "Date": "Sat, 16 Aug 2025 00:42:54 GMT",
          "Server": "scaffolding on HTTPServer2",
          "Vary": "Origin, X-Origin, Referer",
          "X-Content-Type-Options": "nosniff",
          "X-Frame-Options": "SAMEORIGIN",
          "X-Xss-Protection": "0"
        },
        "bodySegments": [
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "low"
                    }
                  ],
                  "role": "model"
                }
              }
            ],
            "createTime": "2025-08-16T00:42:54.618015Z",
            "modelVersion": "gemini-1.5-flash-002",
            "responseId": "DtSfaJ_cJc2Dm9IPlu_Z0QI",
            "usageMetadata": {
              "billablePromptUsage": {
                "textCount": 48
              },
              "trafficType": "ON_DEMAND"
            }
          },
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "\n\nThe sky is blue because of a phenomenon called Rayleigh scattering.  Sunlight is"
                    }
                  ],
                  "role": "model"
                }
              }
            ],
            "createTime": "2025-08-16T00:42:54.618015Z",
            "modelVersion": "gemini-1.5-flash-002",
            "responseId": "DtSfaJ_cJc2Dm9IPlu_Z0QI",
            "usageMetadata": {
              "trafficType": "ON_DEMAND"
            }
          },
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": " made up of all the colors of the rainbow.  As sunlight enters the Earth"
                    }
                  ],
                  "role": "model"
                }
              }
            ],
            "createTime": "2025-08-16T00:42:54.618015Z",
            "modelVersion": "gemini-1.5-flash-002",
            "responseId": "DtSfaJ_cJc2Dm9IPlu_Z0QI",
            "usageMetadata": {
              "trafficType": "ON_DEMAND"
            }
          },
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "'s atmosphere, it collides with tiny air molecules (mostly nitrogen and oxygen).  These molecules are much smaller than the wavelengths of visible light.  Ray"
                    }
                  ],
                  "role": "model"
                }
              }
            ],
            "createTime": "2025-08-16T00:42:54.618015Z",
            "modelVersion": "gemini-1.5-flash-002",
            "responseId": "DtSfaJ_cJc2Dm9IPlu_Z0QI",
            "usageMetadata": {
              "trafficType": "ON_DEMAND"
            }
          },
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "leigh scattering affects shorter wavelengths of light more strongly than longer wavelengths.  Blue and violet light have the shortest wavelengths, so they are scattered more than other colors."
                    }
                  ],
                  "role": "model"
                }
              }
            ],
            "createTime": "2025-08-16T00:42:54.618015Z",
            "modelVersion": "gemini-1.5-flash-002",
            "responseId": "DtSfaJ_cJc2Dm9IPlu_Z0QI",
            "usageMetadata": {
              "trafficType": "ON_DEMAND"
            }
          },
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "  This scattered blue light is what we see when we look at the sky.  Violet light is scattered even more than blue, but our eyes are less sensitive to violet, and the sun emits slightly less violet light, so we perceive the"
                    }
                  ],
                  "role": "model"
                }
              }
            ],
            "createTime": "2025-08-16T00:42:54.618015Z",
            "modelVersion": "gemini-1.5-flash-002",
            "responseId": "DtSfaJ_cJc2Dm9IPlu_Z0QI",
            "usageMetadata": {
              "trafficType": "ON_DEMAND"
            }
          },
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": " sky as blue.\n"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP"
              }
            ],
            "createTime": "2025-08-16T00:42:54.618015Z",
            "modelVersion": "gemini-1.5-flash-002",
            "responseId": "DtSfaJ_cJc2Dm9IPlu_Z0QI",
            "usageMetadata": {
              "candidatesTokenCount": 150,
              "candidatesTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 150
                }
              ],
              "promptTokenCount": 17,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 17
                }
              ],
              "totalTokenCount": 167,
              "trafficType": "ON_DEMAND"
            }
          }
        ]
      }
    }
  ]
}
